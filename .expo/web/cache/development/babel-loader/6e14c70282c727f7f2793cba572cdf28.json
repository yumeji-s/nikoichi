{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport { createMaterialTopTabNavigator } from '@react-navigation/material-top-tabs';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { ChatRoomScreen } from \"../screens/ChatRoomScreen\";\nimport { ChatTabScreen } from \"../screens/ChatTabScreen\";\nimport { MatchUserTabScreen } from \"../screens/MatchUserTabScreen\";\nimport { ProfileScreen } from \"../screens/ProfileScreen\";\nimport { SearchTabScreen } from \"../screens/SearchTabScreen\";\nimport { SwipeScreen } from \"../screens/SwipeScreen\";\nimport { FromPartnerScreen } from \"../screens/FromPartnerScreen\";\nimport { LoginScreen } from \"../screens/LoginScreen\";\nimport { RegisterScreen } from \"../screens/RegisterScreen\";\nimport { LoadingScreen } from \"../screens/LoadingScreen\";\nimport { auth } from \"../../firebase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Stack = createStackNavigator();\n\nvar HomeStackNavigator = function HomeStackNavigator() {\n  return _jsx(Stack.Navigator, {\n    initialRouteName: \"Home\",\n    children: _jsx(Stack.Screen, {\n      name: \"Home\",\n      component: SwipeScreen,\n      options: {\n        headerTitle: 'メイン',\n        headerBackTitleVisible: false,\n        headerShown: false\n      }\n    })\n  });\n};\n\nvar fromPartnerStackNavigator = function fromPartnerStackNavigator() {\n  return _jsx(Stack.Navigator, {\n    initialRouteName: \"Home\",\n    children: _jsx(Stack.Screen, {\n      name: \"Home\",\n      component: FromPartnerScreen,\n      options: {\n        headerTitle: 'メイン',\n        headerBackTitleVisible: false,\n        headerShown: false\n      }\n    })\n  });\n};\n\nvar MatchUserStackNavigator = function MatchUserStackNavigator() {\n  return _jsx(Stack.Navigator, {\n    initialRouteName: \"Main\",\n    children: _jsx(Stack.Screen, {\n      name: \"Main\",\n      component: MatchUserTabScreen,\n      options: {\n        headerTitle: 'やりとり',\n        headerBackTitleVisible: false,\n        headerTitleAlign: 'center'\n      }\n    })\n  });\n};\n\nvar ChatStackNavigator = function ChatStackNavigator() {\n  return _jsxs(Stack.Navigator, {\n    initialRouteName: \"Main\",\n    children: [_jsx(Stack.Screen, {\n      name: \"Main\",\n      component: ChatTabScreen,\n      options: {\n        headerTitle: 'やりとり',\n        headerBackTitleVisible: false,\n        headerTitleAlign: 'center'\n      }\n    }), _jsx(Stack.Screen, {\n      name: \"Chatroom\",\n      component: ChatRoomScreen,\n      options: {\n        headerTitle: '',\n        headerBackTitleVisible: false,\n        headerShown: false\n      }\n    })]\n  });\n};\n\nvar SearchStackNavigator = function SearchStackNavigator() {\n  return _jsx(Stack.Navigator, {\n    initialRouteName: \"Main\",\n    children: _jsx(Stack.Screen, {\n      name: \"Main\",\n      component: SearchTabScreen,\n      options: {\n        headerBackTitleVisible: false,\n        headerShown: false\n      }\n    })\n  });\n};\n\nvar ProfileNavigator = function ProfileNavigator() {\n  return _jsx(Stack.Navigator, {\n    initialRouteName: \"Main\",\n    children: _jsx(Stack.Screen, {\n      name: \"Main\",\n      component: ProfileScreen,\n      options: {\n        headerTitle: 'プロフィール',\n        headerBackTitleVisible: false,\n        headerTitleAlign: 'center'\n      }\n    })\n  });\n};\n\nvar ParentTab = createBottomTabNavigator();\nvar userTab = createMaterialTopTabNavigator();\nvar chatTab = createMaterialTopTabNavigator();\n\nvar userTabs = function userTabs() {\n  return _jsxs(userTab.Navigator, {\n    initialRouteName: \"bestUser\",\n    screenOptions: function screenOptions(_ref) {\n      var route = _ref.route;\n      return {\n        \"tabBarStyle\": [{\n          \"display\": \"flex\"\n        }, null]\n      };\n    },\n    children: [_jsx(userTab.Screen, {\n      name: \"bestUser\",\n      options: {\n        tabBarLabel: 'おすすめ'\n      },\n      component: HomeStackNavigator\n    }), _jsx(userTab.Screen, {\n      name: \"fromPartner\",\n      options: {\n        tabBarLabel: '相手から'\n      },\n      component: fromPartnerStackNavigator\n    })]\n  });\n};\n\nvar chatTabs = function chatTabs() {\n  return _jsxs(userTab.Navigator, {\n    initialRouteName: \"chatRooms\",\n    screenOptions: function screenOptions(_ref2) {\n      var route = _ref2.route;\n      return {\n        \"tabBarStyle\": [{\n          \"display\": \"flex\"\n        }, null]\n      };\n    },\n    children: [_jsx(userTab.Screen, {\n      name: \"matchUser\",\n      options: {\n        tabBarLabel: 'マッチした人'\n      },\n      component: MatchUserStackNavigator\n    }), _jsx(userTab.Screen, {\n      name: \"chatRooms\",\n      options: {\n        tabBarLabel: 'メッセージ'\n      },\n      component: ChatStackNavigator\n    })]\n  });\n};\n\nvar userInfo = function userInfo() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  useEffect(function () {\n    var unsubscribe = onAuthStateChanged(auth, function (user) {\n      if (user) {\n        setUser(user);\n      } else {\n        setUser(null);\n      }\n\n      setLoading(false);\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  return [user == null ? false : true, loading];\n};\n\nvar TabNavigator = function TabNavigator() {\n  var _userInfo = userInfo(),\n      _userInfo2 = _slicedToArray(_userInfo, 2),\n      user = _userInfo2[0],\n      loading = _userInfo2[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      render = _useState8[0],\n      setRender = _useState8[1];\n\n  var count = false;\n\n  if (loading) {\n    return _jsx(LoadingScreen, {});\n  }\n\n  if (!user) {\n    count = true;\n    return _jsxs(Stack.Navigator, {\n      initialRouteName: \"Main\",\n      children: [_jsx(Stack.Screen, {\n        name: \"Login\",\n        component: LoginScreen,\n        options: {\n          headerShown: false\n        }\n      }), _jsx(Stack.Screen, {\n        name: \"Register\",\n        component: RegisterScreen,\n        options: {\n          headerShown: false\n        }\n      })]\n    });\n  }\n\n  if (count) {\n    setRender(function (reRender) {\n      return !reRender;\n    });\n  }\n\n  if (auth.currentUser.metadata.creationTime == auth.currentUser.metadata.lastSignInTime) {\n    console.log(auth.currentUser.metadata.creationTime);\n  }\n\n  return _jsxs(ParentTab.Navigator, {\n    initialRouteName: \"bestUsersTab\",\n    screenOptions: function screenOptions(_ref3) {\n      var route = _ref3.route;\n      return {\n        tabBarIcon: function tabBarIcon(_ref4) {\n          var focused = _ref4.focused,\n              color = _ref4.color,\n              size = _ref4.size;\n\n          switch (route.name) {\n            case 'bestUsersTab':\n              return _jsx(Ionicons, {\n                name: \"home\",\n                size: 24\n              });\n\n            case 'SearchTab':\n              return _jsx(Ionicons, {\n                name: \"ios-compass-outline\",\n                size: 24\n              });\n\n            case 'ChatTab':\n              return _jsx(Ionicons, {\n                name: \"chatbubble-ellipses-outline\",\n                size: 24\n              });\n\n            case 'ProfTab':\n              return _jsx(Ionicons, {\n                name: \"person-circle-outline\",\n                size: 24\n              });\n          }\n        },\n        \"headerShown\": false,\n        \"tabBarShowLabel\": false,\n        \"tabBarStyle\": [{\n          \"display\": \"flex\"\n        }, null]\n      };\n    },\n    children: [_jsx(ParentTab.Screen, {\n      name: \"bestUsersTab\",\n      component: userTabs\n    }), _jsx(ParentTab.Screen, {\n      name: \"SearchTab\",\n      component: SearchStackNavigator\n    }), _jsx(ParentTab.Screen, {\n      name: \"ChatTab\",\n      component: chatTabs\n    }), _jsx(ParentTab.Screen, {\n      name: \"ProfTab\",\n      component: ProfileNavigator\n    })]\n  });\n};\n\nexport { TabNavigator };","map":{"version":3,"sources":["C:/Users/yumej/github/nikoichi/src/navigators/TabNavigator.js"],"names":["React","useEffect","useState","Ionicons","createMaterialTopTabNavigator","createBottomTabNavigator","createStackNavigator","onAuthStateChanged","ChatRoomScreen","ChatTabScreen","MatchUserTabScreen","ProfileScreen","SearchTabScreen","SwipeScreen","FromPartnerScreen","LoginScreen","RegisterScreen","LoadingScreen","auth","Stack","HomeStackNavigator","headerTitle","headerBackTitleVisible","headerShown","fromPartnerStackNavigator","MatchUserStackNavigator","headerTitleAlign","ChatStackNavigator","SearchStackNavigator","ProfileNavigator","ParentTab","userTab","chatTab","userTabs","route","tabBarLabel","chatTabs","userInfo","user","setUser","loading","setLoading","error","setError","unsubscribe","TabNavigator","render","setRender","count","reRender","currentUser","metadata","creationTime","lastSignInTime","console","log","tabBarIcon","focused","color","size","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Ionicons from 'react-native-vector-icons/Ionicons'\r\nimport { createMaterialTopTabNavigator } from '@react-navigation/material-top-tabs';\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs'\r\nimport { createStackNavigator } from '@react-navigation/stack'\r\nimport { onAuthStateChanged } from 'firebase/auth'\r\n\r\nimport { ChatRoomScreen } from '../screens/ChatRoomScreen'\r\nimport { ChatTabScreen } from '../screens/ChatTabScreen'\r\nimport { MatchUserTabScreen } from '../screens/MatchUserTabScreen'\r\nimport { ProfileScreen } from '../screens/ProfileScreen'\r\nimport { SearchTabScreen } from '../screens/SearchTabScreen'\r\nimport { SwipeScreen } from '../screens/SwipeScreen'\r\nimport { FromPartnerScreen } from '../screens/FromPartnerScreen'\r\nimport { LoginScreen } from '../screens/LoginScreen'\r\nimport { RegisterScreen } from '../screens/RegisterScreen'\r\nimport { LoadingScreen } from '../screens/LoadingScreen'\r\nimport { auth } from '../../firebase'\r\n\r\nconst Stack = createStackNavigator()\r\n\r\nconst HomeStackNavigator = () => (\r\n  <Stack.Navigator initialRouteName=\"Home\">\r\n    <Stack.Screen\r\n      name=\"Home\"\r\n      component={SwipeScreen}\r\n      options={{\r\n        headerTitle: 'メイン',\r\n        headerBackTitleVisible: false,\r\n        headerShown: false,\r\n      }}\r\n    />\r\n  </Stack.Navigator>\r\n)\r\n\r\nconst fromPartnerStackNavigator = () => (\r\n  <Stack.Navigator initialRouteName=\"Home\">\r\n    <Stack.Screen\r\n      name=\"Home\"\r\n      component={FromPartnerScreen}\r\n      options={{\r\n        headerTitle: 'メイン',\r\n        headerBackTitleVisible: false,\r\n        headerShown: false,\r\n      }}\r\n    />\r\n  </Stack.Navigator>\r\n)\r\n\r\nconst MatchUserStackNavigator = () => (\r\n  <Stack.Navigator initialRouteName=\"Main\">\r\n    <Stack.Screen\r\n      name=\"Main\"\r\n      component={MatchUserTabScreen}\r\n      options={{\r\n        headerTitle: 'やりとり',\r\n        headerBackTitleVisible: false,\r\n        headerTitleAlign: 'center',\r\n        // headerShown: false,\r\n      }}\r\n    />\r\n  </Stack.Navigator>\r\n)\r\n\r\nconst ChatStackNavigator = () => (\r\n  <Stack.Navigator initialRouteName=\"Main\">\r\n    <Stack.Screen\r\n      name=\"Main\"\r\n      component={ChatTabScreen}\r\n      options={{\r\n        headerTitle: 'やりとり',\r\n        headerBackTitleVisible: false,\r\n        headerTitleAlign: 'center',\r\n        // headerShown: false,\r\n      }}\r\n    />\r\n    <Stack.Screen\r\n      name=\"Chatroom\"\r\n      component={ChatRoomScreen}\r\n      options={{\r\n        headerTitle: '',\r\n        headerBackTitleVisible: false,\r\n        headerShown: false,\r\n      }}\r\n    />\r\n  </Stack.Navigator>\r\n)\r\n\r\nconst SearchStackNavigator = () => (\r\n  <Stack.Navigator initialRouteName=\"Main\">\r\n    <Stack.Screen\r\n      name=\"Main\"\r\n      component={SearchTabScreen}\r\n      options={{\r\n        headerBackTitleVisible: false,\r\n        headerShown: false,\r\n      }}\r\n    />\r\n  </Stack.Navigator>\r\n)\r\n\r\nconst ProfileNavigator = () => (\r\n  <Stack.Navigator initialRouteName=\"Main\">\r\n    <Stack.Screen\r\n      name=\"Main\"\r\n      component={ProfileScreen}\r\n      options={{\r\n        headerTitle: 'プロフィール',\r\n        headerBackTitleVisible: false,\r\n        headerTitleAlign: 'center',\r\n      }}\r\n    />\r\n  </Stack.Navigator>\r\n)\r\n\r\n\r\n\r\n\r\n\r\n// 親タブ\r\nconst ParentTab = createBottomTabNavigator()\r\nconst userTab = createMaterialTopTabNavigator();\r\nconst chatTab = createMaterialTopTabNavigator();\r\n\r\nconst userTabs = () => {\r\n  return (\r\n    <userTab.Navigator\r\n      initialRouteName=\"bestUser\"\r\n      screenOptions={({ route }) => ({\r\n        \"tabBarStyle\": [\r\n          {\r\n            \"display\": \"flex\"\r\n          },\r\n          null\r\n        ]\r\n      })}\r\n    >\r\n      <userTab.Screen name=\"bestUser\" options={{ tabBarLabel: 'おすすめ' }} component={HomeStackNavigator} />\r\n      <userTab.Screen name=\"fromPartner\" options={{ tabBarLabel: '相手から' }} component={fromPartnerStackNavigator} />\r\n    </userTab.Navigator>\r\n  );\r\n}\r\n\r\nconst chatTabs = () => {\r\n  return (\r\n    <userTab.Navigator\r\n      initialRouteName=\"chatRooms\"\r\n      screenOptions={({ route }) => ({\r\n        \"tabBarStyle\": [\r\n          {\r\n            \"display\": \"flex\"\r\n          },\r\n          null\r\n        ]\r\n      })}\r\n    >\r\n      <userTab.Screen name=\"matchUser\" options={{ tabBarLabel: 'マッチした人' }} component={MatchUserStackNavigator} />\r\n      <userTab.Screen name=\"chatRooms\" options={{ tabBarLabel: 'メッセージ' }} component={ChatStackNavigator} />\r\n    </userTab.Navigator>\r\n  );\r\n}\r\n\r\nconst userInfo = () => {\r\n  const [user, setUser] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(null)\r\n\r\n  // ログイン情報の取得\r\n  useEffect(() => {\r\n    // ログイン状況の監視\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        setUser(user)\r\n      }else{\r\n        setUser(null)\r\n      }\r\n      setLoading(false)\r\n    })\r\n    // 監視の解除\r\n    return () => unsubscribe()\r\n  }, []);\r\n  return [user == null ? false : true, loading]\r\n}\r\n\r\nconst TabNavigator = () => {\r\n\r\n  const [user, loading] = userInfo();\r\n  const [render, setRender] = useState(false);\r\n  let count = false;\r\n\r\n  if(loading){\r\n    return <LoadingScreen/>\r\n  }\r\n\r\n  if(!user){\r\n    count = true;\r\n    return (\r\n        <Stack.Navigator initialRouteName=\"Main\">\r\n          <Stack.Screen \r\n            name=\"Login\" \r\n            component={LoginScreen}\r\n            options={{\r\n              headerShown: false,\r\n            }}\r\n          />\r\n          <Stack.Screen \r\n            name=\"Register\"\r\n            component={RegisterScreen}\r\n            options={{\r\n              headerShown: false,\r\n            }}\r\n          />\r\n        </Stack.Navigator>\r\n      )\r\n  }\r\n\r\n  if(count){\r\n    setRender(reRender => !reRender);\r\n  }\r\n\r\n  // 初回登録した人\r\n  if(auth.currentUser.metadata.creationTime == auth.currentUser.metadata.lastSignInTime){\r\n    // プロフィール登録\r\n    console.log(auth.currentUser.metadata.creationTime);\r\n  }\r\n\r\n  return (\r\n    <ParentTab.Navigator\r\n      initialRouteName=\"bestUsersTab\"\r\n      screenOptions={({ route }) => ({\r\n        tabBarIcon: ({ focused, color, size }) => {\r\n          switch(route.name){\r\n            case 'bestUsersTab':\r\n              return <Ionicons name=\"home\" size={24} />\r\n            case 'SearchTab':\r\n              return <Ionicons name=\"ios-compass-outline\" size={24} />\r\n            case 'ChatTab':\r\n              return <Ionicons name=\"chatbubble-ellipses-outline\" size={24} />\r\n            case 'ProfTab':\r\n              return <Ionicons name=\"person-circle-outline\" size={24} />\r\n          }\r\n        },\r\n        \"headerShown\": false,\r\n        \"tabBarShowLabel\": false,\r\n        \"tabBarStyle\": [\r\n          {\r\n            \"display\": \"flex\"\r\n          },\r\n          null\r\n        ]\r\n      })}\r\n    >\r\n      <ParentTab.Screen name=\"bestUsersTab\" component={userTabs} />\r\n      <ParentTab.Screen name=\"SearchTab\" component={SearchStackNavigator} />\r\n      <ParentTab.Screen name=\"ChatTab\" component={chatTabs} />\r\n      <ParentTab.Screen name=\"ProfTab\" component={ProfileNavigator} />\r\n    </ParentTab.Navigator>\r\n  )\r\n}\r\n\r\nexport { TabNavigator }\r\n"]},"metadata":{},"sourceType":"module"}